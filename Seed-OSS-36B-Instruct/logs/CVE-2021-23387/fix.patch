--- a/index.js
+++ b/index.js
@@ -15,7 +15,10 @@
 
     var req = args[0]
     var res = args[1]
-    var url = u.parse(req.url)
+    var protocol = req.connection.encrypted ? 'https' : 'http'
+    var host = req.headers.host
+    var fullUrl = protocol + '://' + host + req.url
+    var url = u.parse(fullUrl)
     var length = url.pathname.length
     var hasSlash = url.pathname.charAt(length - 1) === '/'
 

