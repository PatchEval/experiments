--- a/index.js
+++ b/index.js
@@ -10,9 +10,9 @@
 function testSync(host, port, connectTimeout) {
     const nodeBinary = process.execPath;
     const scriptPath = path.join(__dirname, "./scripts/connection-tester");
-    const cmd = util.format('"%s" "%s" %s %s %s', nodeBinary, scriptPath, host, port, connectTimeout);
+    const args = [scriptPath, host, port, connectTimeout];
 
-    const shellOut = shell.execSync(cmd).toString();
+    const shellOut = shell.execFileSync(nodeBinary, args, { encoding: 'utf8' });
 
     const output = {
         success: false,

