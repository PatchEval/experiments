--- a/starlette/staticfiles.py
+++ b/starlette/staticfiles.py
@@ -169,9 +169,13 @@
             else:
                 full_path = os.path.realpath(joined_path)
             directory = os.path.realpath(directory)
-            if os.path.commonprefix([full_path, directory]) != directory:
-                # Don't allow misbehaving clients to break out of the static files
-                # directory.
+            try:
+                if os.path.commonpath([full_path, directory]) != directory:
+                    # Don't allow misbehaving clients to break out of the static files
+                    # directory.
+                    continue
+            except ValueError:
+                # Paths are unrelated or on different drives
                 continue
             try:
                 return full_path, os.stat(full_path)

