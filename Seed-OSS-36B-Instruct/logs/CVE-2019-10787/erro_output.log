[PoC RESULT]: True
[PoC MSG]:
============================== Run PoC ==============================
------------------------------ Standard Output ------------------------------
<empty>
------------------------------ Standard Error ------------------------------
PASS poc/im-resize.test.js
  ✓ Command injection should NOT create files (fix should make this pass) (146 ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        0.33 s, estimated 1 s
Ran all test suites matching /.\/poc/i.

------------------------------ Finish Evaluation ------------------------------


[UnitTest RESULT]: False
[UnitTest MSG]:
 ============================== Run Unit Test ==============================
------------------------------ Standard Output ------------------------------


  resize.path()
    ✓ returns new relative path with suffix
    ✓ returns new relative path with custom format
    ✓ returns new absolute path with suffix
    ✓ returns new absolute path with custom format
    ✓ returns new path with prefix
    ✓ returns new path with custom directory

  resize.crop()
    ✓ returns crop geometry for horisontal image
    ✓ returns crop geometry for vertical image
    ✓ returns no crop for image with correct aspectratio
    ✓ returns no crop if no aspectratio is defined

  resize.resize()
    ✓ returns null for no maxWidth or maxHeight
    ✓ returns geometry for only maxWidth
    ✓ returns geometry for only maxHeight
    ✓ returns geometry for maxWidth and maxHeight
    ✓ sets width and height on version object

  resize.cmd()
    ✓ sets global path to each version
    ✓ sets global prefix to each version
    ✓ sets default quality to each version
    ✓ sets global quality to each version
    ✓ preserves local version quality
    1) returns convert command

  resize.cmdVersion()
    2) returns convert command for version
    3) returns convert command for last version
    4) sets quality if specified
    5) sets crop if aspect ratio is defined


  20 passing (10ms)
  5 failing

  1) resize.cmd() returns convert command:
     AssertionError [ERR_ASSERTION]: [
  'convert',
  './assets/horizontal.jpg',
  '-auto-orient',
  '-strip',
  '-write',
  'mpr:./assets/horizontal.jpg',
  '+delete',
  [
    'mpr:./assets/horizontal.jpg',
    '-quality',
    80,
    '-resize',
    '1920x1920',
    '-write',
    'assets/horizontal-full.jpg',
    '+delete'
  ],
  [
    'mpr:./assets/horizontal.jpg',
    '-quality',
    80,
    '-crop',
    '3936x2623+624+0',
    '-resize',
    '1200x1200',
    'assets/horizontal-1200.jpg'
  ]
] == 'convert ./assets/horizontal.jpg -auto-orient -strip -write mpr:./assets/horizontal.jpg +delete mpr:./assets/horizontal.jpg -quality 80 -resize "1920x1920" -write assets/horizontal-full.jpg +delete mpr:./assets/horizontal.jpg -quality 80 -crop "3936x2623+624+0" -resize "1200x1200" assets/horizontal-1200.jpg'
      at Context.<anonymous> (test.js:201:12)
      at process.processImmediate (node:internal/timers:491:21)

  2) resize.cmdVersion() returns convert command for version:
     AssertionError [ERR_ASSERTION]: [
  'mpr:./a.jpg',
  '-resize',
  '500x500',
  '-write',
  'a-b.jpg',
  '+delete'
] == 'mpr:./a.jpg -resize "500x500" -write a-b.jpg +delete'
      at Context.<anonymous> (test.js:245:12)
      at process.processImmediate (node:internal/timers:491:21)

  3) resize.cmdVersion() returns convert command for last version:
     AssertionError [ERR_ASSERTION]: [
  'mpr:./a.jpg',
  '-resize',
  '500x500',
  'a-b.jpg'
] == 'mpr:./a.jpg -resize "500x500" a-b.jpg'
      at Context.<anonymous> (test.js:252:12)
      at process.processImmediate (node:internal/timers:491:21)

  4) resize.cmdVersion() sets quality if specified:
     AssertionError [ERR_ASSERTION]: [
  'mpr:./a.jpg',
  '-quality',
  50,
  '-resize',
  '500x500',
  '-write',
  'a-b.jpg',
  '+delete'
] == 'mpr:./a.jpg -quality 50 -resize "500x500" -write a-b.jpg +delete'
      at Context.<anonymous> (test.js:261:12)
      at process.processImmediate (node:internal/timers:491:21)

  5) resize.cmdVersion() sets crop if aspect ratio is defined:
     AssertionError [ERR_ASSERTION]: [
  'mpr:./a.jpg',
  '-crop',
  '1334x1000+333+0',
  '-resize',
  '500x500',
  '-write',
  'a-b.jpg',
  '+delete'
] == 'mpr:./a.jpg -crop "1334x1000+333+0" -resize "500x500" -write a-b.jpg +delete'
      at Context.<anonymous> (test.js:276:12)
      at process.processImmediate (node:internal/timers:491:21)




------------------------------ Standard Error ------------------------------
Error: No test files found: "test"

------------------------------ Finish Evaluation ------------------------------


[Validation TYPE]: validation_fail