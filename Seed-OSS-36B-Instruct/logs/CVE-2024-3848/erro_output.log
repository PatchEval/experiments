[PoC RESULT]: False
[PoC MSG]:
============================== Run PoC ==============================
------------------------------ Standard Output ------------------------------
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.20, pytest-8.1.0, pluggy-1.5.0 -- /workspace/PoC_env/CVE-2024-3848/bin/python
cachedir: .pytest_cache
rootdir: /workspace/mlflow
configfile: pytest.ini
plugins: cov-5.0.0, anyio-4.5.2, timeout-2.3.1, localserver-0.5.0
timeout: 1200.0s
timeout method: signal
timeout func_only: False
[1mcollecting ... [0mcollected 1 item

tests/server/test_handlers.py::test_local_file_read_write_by_pass_vulnerability [31mFAILED | MEM 5.3/251.6 GB | DISK 966.9/5038.6 GB[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m_______________ test_local_file_read_write_by_pass_vulnerability _______________[0m

    [0m[94mdef[39;49;00m[90m [39;49;00m[92mtest_local_file_read_write_by_pass_vulnerability[39;49;00m():[90m[39;49;00m
        request = mock.MagicMock()[90m[39;49;00m
        request.method = [33m"[39;49;00m[33mPOST[39;49;00m[33m"[39;49;00m[90m[39;49;00m
        request.content_type = [33m"[39;49;00m[33mapplication/json; charset=utf-8[39;49;00m[33m"[39;49;00m[90m[39;49;00m
        request.get_json = mock.MagicMock()[90m[39;49;00m
        request.get_json.return_value = {[90m[39;49;00m
            [33m"[39;49;00m[33mname[39;49;00m[33m"[39;49;00m: [33m"[39;49;00m[33mhello[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
            [33m"[39;49;00m[33martifact_location[39;49;00m[33m"[39;49;00m: [33m"[39;49;00m[33mhttp://host#/abc/etc/[39;49;00m[33m"[39;49;00m,[90m[39;49;00m
        }[90m[39;49;00m
        msg = _get_request_message(CreateExperiment(), flask_request=request)[90m[39;49;00m
        [94mwith[39;49;00m mock.patch([33m"[39;49;00m[33mmlflow.server.handlers._get_request_message[39;49;00m[33m"[39;49;00m, return_value=msg):[90m[39;49;00m
            response = _create_experiment()[90m[39;49;00m
            json_response = json.loads(response.get_data())[90m[39;49;00m
>           [94massert[39;49;00m json_response[[33m"[39;49;00m[33mmessage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33m'[39;49;00m[33martifact_location[39;49;00m[33m'[39;49;00m[33m URL can[39;49;00m[33m'[39;49;00m[33mt include fragment part.[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE           assert 'Expected str, got bytes' == "'artifact_lo...ragment part."[0m
[1m[31mE             [0m
[1m[31mE             - 'artifact_location' URL can't include fragment part.[0m
[1m[31mE             + Expected str, got bytes[0m

json_response = {'error_code': 'INTERNAL_ERROR', 'message': 'Expected str, got bytes'}
msg        = name: "hello"
artifact_location: "http://host#/abc/etc/"

request    = <MagicMock id='139825431262736'>
response   = <Response 70 bytes [500 INTERNAL SERVER ERROR]>

[1m[31mtests/server/test_handlers.py[0m:820: AssertionError
----------------------------- Captured stderr call -----------------------------
2025/10/30 12:21:36 INFO mlflow.store.db.utils: Creating initial MLflow database tables...
2025/10/30 12:21:36 INFO mlflow.store.db.utils: Updating database tables
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 451aebb31d03, add metric step
INFO  [alembic.runtime.migration] Running upgrade 451aebb31d03 -> 90e64c465722, migrate user column to tags
INFO  [alembic.runtime.migration] Running upgrade 90e64c465722 -> 181f10493468, allow nulls for metric values
INFO  [alembic.runtime.migration] Running upgrade 181f10493468 -> df50e92ffc5e, Add Experiment Tags Table
INFO  [alembic.runtime.migration] Running upgrade df50e92ffc5e -> 7ac759974ad8, Update run tags with larger limit
INFO  [alembic.runtime.migration] Running upgrade 7ac759974ad8 -> 89d4b8295536, create latest metrics table
INFO  [89d4b8295536_create_latest_metrics_table_py] Migration complete!
INFO  [alembic.runtime.migration] Running upgrade 89d4b8295536 -> 2b4d017a5e9b, add model registry tables to db
INFO  [2b4d017a5e9b_add_model_registry_tables_to_db_py] Adding registered_models and model_versions tables to database.
INFO  [2b4d017a5e9b_add_model_registry_tables_to_db_py] Migration complete!
INFO  [alembic.runtime.migration] Running upgrade 2b4d017a5e9b -> cfd24bdc0731, Update run status constraint with killed
INFO  [alembic.runtime.migration] Running upgrade cfd24bdc0731 -> 0a8213491aaa, drop_duplicate_killed_constraint
INFO  [alembic.runtime.migration] Running upgrade 0a8213491aaa -> 728d730b5ebd, add registered model tags table
INFO  [alembic.runtime.migration] Running upgrade 728d730b5ebd -> 27a6a02d2cf1, add model version tags table
INFO  [alembic.runtime.migration] Running upgrade 27a6a02d2cf1 -> 84291f40a231, add run_link to model_version
INFO  [alembic.runtime.migration] Running upgrade 84291f40a231 -> a8c4a736bde6, allow nulls for run_id
INFO  [alembic.runtime.migration] Running upgrade a8c4a736bde6 -> 39d1c3be5f05, add_is_nan_constraint_for_metrics_tables_if_necessary
INFO  [alembic.runtime.migration] Running upgrade 39d1c3be5f05 -> c48cb773bb87, reset_default_value_for_is_nan_in_metrics_table_for_mysql
INFO  [alembic.runtime.migration] Running upgrade c48cb773bb87 -> bd07f7e963c5, create index on run_uuid
INFO  [alembic.runtime.migration] Running upgrade bd07f7e963c5 -> 0c779009ac13, add deleted_time field to runs table
INFO  [alembic.runtime.migration] Running upgrade 0c779009ac13 -> cc1f77228345, change param value length to 500
INFO  [alembic.runtime.migration] Running upgrade cc1f77228345 -> 97727af70f4d, Add creation_time and last_update_time to experiments table
INFO  [alembic.runtime.migration] Running upgrade 97727af70f4d -> 3500859a5d39, Add Model Aliases table
INFO  [alembic.runtime.migration] Running upgrade 3500859a5d39 -> 7f2a7d5fae7d, add datasets inputs input_tags tables
INFO  [alembic.runtime.migration] Running upgrade 7f2a7d5fae7d -> 2d6e25af4d3e, increase max param val length from 500 to 8000
INFO  [alembic.runtime.migration] Running upgrade 2d6e25af4d3e -> acf3f17fdcc7, add storage location field to model versions
INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
============================= slowest 10 durations =============================
0.92s call     tests/server/test_handlers.py::test_local_file_read_write_by_pass_vulnerability

(2 durations < 0.005s hidden.  Use -vv to show these durations.)
======================= command to run failed test cases =======================
pytest 'tests/server/test_handlers.py::test_local_file_read_write_by_pass_vulnerability'

[36m[1m=========================== short test summary info ============================[0m
[31mFAILED | MEM 5.3/251.6 GB | DISK 966.9/5038.6 GB[0m tests/server/test_handlers.py::[1mtest_local_file_read_write_by_pass_vulnerability[0m - assert 'Expected str, got bytes' == "'artifact_lo...ragment part."
[31m========================= [31m[1m1 failed[0m, [33m1 warning[0m[31m in 1.28s[0m[31m =========================[0m

------------------------------ Finish Evaluation ------------------------------


[UnitTest RESULT]: None
[UnitTest MSG]:
 None

[Validation TYPE]: validation_fail