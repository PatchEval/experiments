--- a/libs/core/langchain_core/utils/html.py
+++ b/libs/core/langchain_core/utils/html.py
@@ -83,7 +83,17 @@
     for path in absolute_paths:
         if any(path.startswith(exclude) for exclude in exclude_prefixes):
             continue
-        if prevent_outside and not path.startswith(base_url):
-            continue
+        if prevent_outside:
+            # Parse both URLs to check netloc and path properly
+            path_parsed = urlparse(path)
+            base_parsed = urlparse(base_url)
+            
+            # Check if netlocs match (including subdomains)
+            if path_parsed.netloc != base_parsed.netloc:
+                continue
+                
+            # Check if path is within base path (using urljoin to handle relative paths)
+            if not urljoin(base_url + "/", path_parsed.path).startswith(base_url + "/"):
+                continue
         res.append(path)
     return res

